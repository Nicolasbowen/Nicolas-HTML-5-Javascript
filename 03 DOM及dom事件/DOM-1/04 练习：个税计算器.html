<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>

<body>
    <!--<header>计算</header>
    <form action="">
        <input type="text" value='33333' pattern="">
        <input type="submit" value="计算">
    </form>-->

    <!--<button onclick="var a = 10;alert(a)"></button>-->

    
</body>

</html>
<script>
    // 取消body的外边距
    document.body.style.margin = 　"0";
    // 创建header标签，并设置样式
    var header = document.createElement("header");
    console.log(header);
    document.body.appendChild(header);
    header.innerHTML = "个税计算器";
    header.style.height = "50px";
    header.style.backgroundColor = "red";
    header.style.textAlign = "center";
    header.style.lineHeight = "50px";
    header.style.color = "white";

    // 创建form表单
    var form = document.createElement("form");
    document.body.appendChild(form);
    form.style.padding = "10px";
    // 创建输入框
    var input1 = document.createElement("input");
    form.appendChild(input1);
    // input1.type = "number";
    input1.type = "text";
    input1.pattern = "^[0-9]*$"
    // 创建提交按钮
    var input2 = document.createElement("input");
    form.appendChild(input2);
    input2.type = "submit";
    input2.value = "计算";
    input2.style.marginLeft = "20px";
    // 给input2添加点击事件
    // 当input2这个标签被点击时，事件函数会被执行
    input2.onclick = function (event) {
        // event参数记录了事件的信息
        console.log(event);
        // 被触发事件的元素 target(目标) （发生的事件的标签元素）
        console.log(event.target);
        console.log(this);

        // 阻止默认事件（form表单中提交按钮的一个默认行为）
        // （提交按钮的默认行为：当发生点击事件后，默认要执行的一个行为）
        event.preventDefault();

        // 获取输入框中输入的内容input.value
       var zGongzi = input1.value;
       if (isNaN(zGongzi)){
        //    alert("输入有误，请重新输入");
           return;
       }
       p.innerHTML = jisuan(zGongzi);
    //    var result = jisuan(zGongzi);
    
    //    if (isNaN(result)){
    //         p.innerHTML = result;
    //    }
    //    else {
    //        p.innerHTML = "您需要缴纳的费用为"+result.toFixed(2) + "元";
    //    }
    }

    // 创建展示结果的标签p
    var p = document.createElement("p");
    document.body.appendChild(p);


    function jisuan(zGongzi) {
        // var zGongzi = 3000;
        //  基准工资
        var jzGongzi = null;

        if (zGongzi <= 7662) {
            jzGongzi = zGongzi;
        }
        else {
            jzGongzi = 7662;
        }

        // console.log(jzGongzi);

        var bili = 2 / 100 + 0.5 / 100 + 12 / 100 + 8 / 100;
        console.log(bili);

        var sanXianYiJin = jzGongzi * bili;

        var suodeE = zGongzi - sanXianYiJin - 3500;

        // 声明变量并赋值为0
        var shuiE = 0;

        var shuiLv = 0;
        var kouchushu = 0;
        if (suodeE <= 0) {
            // console.log()
            return "您不需要给国家做贡献";
        }
        else if (suodeE <= 1500) {
            shuiLv = 0.03;
            kouchushu = 0;
        }
        else if (/*suodeE > 1500 &&*/ suodeE <= 4500) {
            shuiLv = 0.1;
            kouchushu = 105;
        }
        else if (/*suodeE > 4500 &&*/ suodeE <= 9000) {
            shuiLv = 0.2;
            kouchushu = 555;
        }
        else if (suodeE <= 35000) {
            shuiLv = 0.25;
            kouchushu = 1005;
        }
        else if (suodeE <= 55000) {
            shuiLv = 0.3;
            kouchushu = 2755;


        }
        else if (suodeE <= 80000) {
            shuiLv = 0.35;
            kouchushu = 5505;
        }
        else {
            shuiLv = 0.45;
            kouchushu = 13505;
        }


        // console.log(shuiLv)
        // console.log(kouchushu);

        // console.log(suodeE);

        shuiE = suodeE * shuiLv - kouchushu;

        return "您需要缴纳的费用为"+shuiE.toFixed(2) + "元";

    }

</script>